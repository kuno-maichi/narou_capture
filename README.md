# narou_capture

「小説家になろう」のランキングページを巡回し、作品の中でキーワードが含まれる作品の枠をスクリーンショットとして撮るアプリケーションです。自作や気になる作品がランキングに入っているかを確認するためにお使いください。

## 必要なソフトウェア

- Python 3.10以降
  - [https://www.python.org/downloads/](https://www.python.org/downloads/)からダウンロードしてインストールしてください
  - Python 3.10, 3.11, 3.12のどれでも動くはずです

## 実行

### Windowsの場合

`run.bat` を実行してください。outフォルダの中にスクリーンショットのpngファイルが作成されます。

### Linuxの場合

`run.sh` を実行してください。outディレクトリの中にスクリーンショットのpngファイルが作成されます。

### ファイル名について

ファイル名は次の形式に従います。

```
ラベル名/{ランキング}位_作者-{作者名}_YYYY-MM-DD-hhmm.png
```

たとえば、作者「久野真一」が`[日間] 現実世界〔恋愛〕`ランキングで10位にランクインしていた場合、ファイル名は

`[日間] 現実世界〔恋愛〕/10位_作者-久野真一_2024-03-31-1800.png` のようになります。末尾はスクリーンショットが撮られた時刻です。ラベル名については後述します。

## カスタマイズ

JSONC形式の設定ファイル [config.json](./config.json)を変更することで、巡回するURLをカスタマイズすることができます。JSONC形式は通常のJSONに加えて、`//コメント`や`/*コメント*/`といったスタイルのコメントをかけるように拡張された形式です。

デフォルトでは以下のようになっています：

```js
{
    "items": [
        // 日間現実恋愛1-50位
        "https://yomou.syosetu.com/rank/genrelist/type/daily_102/?p=1",
        // 日間現実恋愛51-100位
        "https://yomou.syosetu.com/rank/genrelist/type/daily_102/?p=2"
    ],
    "texts": [],
    "keywords": ["幼馴染"]
}
```

`items`の中身は配列で、個々の要素はランキングページのURLを表す文字列か、`{"label": "ラベル", "url": URL}`という形式のオブジェクトです。

URLの末尾に`?p=2`のように付加すると51位以下のランキングも取得することができます。ラベルを明示的に指定した場合は`out/ラベル名`というフォルダにスクリーンショットが保存されます。ラベルが指定されない場合はランキングページのHTMLから自動取得します。

`keywords`の中身は配列で個々の要素はテキストです。ランキングに入っている作品のタグがテキストのいずれかを含んでいた場合にスクリーンショットを撮ってくれます。

`texts`の中身は配列で個々の要素はテキストです。ランキングに入っている作品の説明がテキストのいずれかを含んでいた場合にスクリーンショットを撮ってくれます。

ラベル名を明示した場合は以下のようになります：

```js
{
    "items": [
        // 日間現実恋愛1-50位
        {"label": "現恋", "url":"https://yomou.syosetu.com/rank/genrelist/type/daily_102/?p=1"},
        // 日間現実恋愛51-100位
        {"label": "現恋", "url":"https://yomou.syosetu.com/rank/genrelist/type/daily_102/?p=2"}
    ],
    "texts": [],
    "keywords": ["幼馴染"]
}
```

の場合、`現恋`というフォルダが作成され、その中にスクリーンショットが保存されます。
